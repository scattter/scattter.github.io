import{_ as Y}from"./chunks/logo.d509bc65.js";import{_ as j,i as A,o as v,c as m,d as N,f as P,a as i,b as g}from"./app.49ecc465.js";const R={class:"wrapper view-demo-component"},B=N('<img src="'+Y+'" width="500" height="500" alt="" style="position:absolute;z-index:1;top:180px;" data-v-66465e5f><canvas id="scratch" width="500" height="500" style="z-index:2;" data-v-66465e5f></canvas><div class="opera" data-v-66465e5f><div class="width" data-v-66465e5f><span data-v-66465e5f>\u5BBD\u5EA6</span><button class="scratch-minus" data-v-66465e5f> - </button><input class="scratch-width-input" type="number" value="15" readonly data-v-66465e5f><button class="scratch-add" data-v-66465e5f> + </button></div><div class="color" data-v-66465e5f><input type="color" class="scratch-color-input" data-v-66465e5f></div><button class="scratch-clear" data-v-66465e5f>clear</button><button class="scratch-save" data-v-66465e5f>save</button><button class="scratch-repaint" data-v-66465e5f>repaint</button></div>',3),E=[B],I={__name:"ScratchTicket",setup(b){return A(()=>{const e=document.querySelector("#scratch"),t=e.getContext("2d"),o=document.querySelector(".scratch-width-input"),k=document.querySelector(".scratch-clear"),S=document.querySelector(".scratch-save"),x=document.querySelector(".scratch-repaint"),l=document.querySelector(".scratch-color-input");let d=!1,y,w,s={startX:y,startY:w};l.value="black";let u=l.value,f=!1,r=1,p=[];_(),k.onclick=h,x.onclick=_;function h(){if(r<=0){p.forEach(a=>cancelAnimationFrame(a));return}t.clearRect(0,0,e.width,e.height),t.globalAlpha=r-=.01,t.save(),t.fillStyle="rgba(255, 255, 255, 1)",t.fillRect(0,0,e.width,e.height),t.restore(),p.push(requestAnimationFrame(h))}function _(){r<=0&&(r=1),t.globalAlpha=r,t.clearRect(0,0,e.width,e.height),t.save(),t.fillStyle="rgba(255, 255, 255, 1)",t.fillRect(0,0,e.width,e.height),t.fillStyle="black",t.font="48px serif",t.textAlign="center",t.textBaseline="middle",t.fillText("\u522E\u51FA\u571F\u8C46",e.width/2,e.height/2),t.restore()}function T(){const a=t.getImageData(0,0,e.width,e.height).data;let c=0;for(let n=0;n<a.length;n+=4)a[n+3]<128&&c++;return(c/a.length*4*100).toFixed(2)}document.querySelector(".scratch-minus").onclick=()=>{o.value=Math.max(parseInt(o.value)-5,5)},document.querySelector(".scratch-add").onclick=()=>{o.value=Math.min(parseInt(o.value)+5,50)},l.onchange=a=>u=a.target.value,e.onmousedown=a=>{s.startX=a.offsetX,s.startY=a.offsetY,d=!0},e.onmouseup=()=>{d=!1},e.onmousemove=a=>{d&&(q(s.startX,s.startY,a.offsetX,a.offsetY),s.startX=a.offsetX,s.startY=a.offsetY)},S.onclick=()=>{const a=e.toDataURL(),c=document.createElement("a");c.href=a,c.download="\u753B\u677F",c.target="_blank",c.click(),c.remove()};function q(a,c,n,X){if(!f){if(T()>=50){f=!0,h();return}t.globalCompositeOperation="destination-out",t.beginPath(),t.moveTo(a,c),t.strokeStyle=u,t.lineWidth=o.value||15,t.lineCap="round",t.lineTo(n,X),t.stroke(),t.closePath()}}}),(e,t)=>(v(),m("div",R,E))}},O=j(I,[["__scopeId","data-v-66465e5f"]]),V=i("h1",{id:"scratch-ticket",tabindex:"-1"},[g("Scratch Ticket "),i("a",{class:"header-anchor",href:"#scratch-ticket","aria-hidden":"true"},"#")],-1),C=i("h2",{id:"_1-\u522E\u522E\u4E50\u7684\u5B9E\u73B0",tabindex:"-1"},[g("1. \u522E\u522E\u4E50\u7684\u5B9E\u73B0 "),i("a",{class:"header-anchor",href:"#_1-\u522E\u522E\u4E50\u7684\u5B9E\u73B0","aria-hidden":"true"},"#")],-1),$=JSON.parse('{"title":"Scratch Ticket","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. \u522E\u522E\u4E50\u7684\u5B9E\u73B0","slug":"_1-\u522E\u522E\u4E50\u7684\u5B9E\u73B0","link":"#_1-\u522E\u522E\u4E50\u7684\u5B9E\u73B0","children":[]}],"relativePath":"project/50projects50days/ScratchTicket.md","lastUpdated":1688387126000}'),D={name:"project/50projects50days/ScratchTicket.md"},z=Object.assign(D,{setup(b){return(e,t)=>(v(),m("div",null,[V,C,P(O)]))}});export{$ as __pageData,z as default};
